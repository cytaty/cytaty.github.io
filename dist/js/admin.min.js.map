{"version":3,"sources":["admin.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","document","ready","on","$parent","this","parent","removeClass","html","data","addClass","parents","text","find","id","dataToSend","replace","active","ajax","method","url","done","msg","hasClass","remove","console","log","_this","confirm"],"mappings":"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","file":"admin.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\n$(document).ready(function () {\n  $(\"blockquote span[contenteditable='true']\").on(\"input\", function () {\n    var $parent = $(this).parent();\n    $parent.removeClass(\"dirty\");\n    if ($(this).html() !== $(this).data(\"start\")) {\n      $parent.addClass(\"dirty\");\n    }\n  });\n\n  $(\"blockquote.quote .controls .btn-success\").on(\"click\", function () {\n    var $parent = $(this).parents(\"blockquote\");\n    var text = $parent.find(\"span[contenteditable='true']\").html();\n    $parent.removeClass(\"dirty\");\n\n    if ($(this).html() !== $(this).data(\"start\")) {\n      (function () {\n        var id = $parent.data(\"id\");\n        var dataToSend = {\n          \"text\": text.replace(/<br>/g, \"\\n\"),\n          \"id\": id,\n          \"active\": true\n        };\n\n        $.ajax({\n          method: \"POST\",\n          url: \"update_quote.php\",\n          data: dataToSend\n        }).done(function (msg) {\n          if ($parent.parent().hasClass(\"new-quotes\")) {\n            $parent.remove();\n          }\n\n          $(\"blockquote[data-id='\" + id + \"']\").removeClass(\"inactive\").find(\"span[contenteditable='true']\").html(text);\n        });\n      })();\n    }\n  });\n\n  $(\"blockquote.quote .controls .btn-danger\").on(\"click\", function () {\n    var $parent = $(this).parents(\"blockquote\");\n    $parent.removeClass(\"dirty\");\n\n    if ($(this).html() !== $(this).data(\"start\")) {\n      (function () {\n        var id = $parent.data(\"id\");\n        var dataToSend = {\n          \"id\": id,\n          \"active\": false\n        };\n\n        $.ajax({\n          method: \"POST\",\n          url: \"update_quote.php\",\n          data: dataToSend\n        }).done(function (msg) {\n          console.log(msg);\n          $(this).addClass(\"inactive\");\n          $(\"blockquote[data-id='\" + id + \"']\").addClass(\"inactive\");\n        });\n      })();\n    }\n  });\n\n  $(\"blockquote.quote .controls .btn-warning\").on(\"click\", function () {\n    var $parent = $(this).parents(\"blockquote\");\n    var text = $parent.find(\"span[contenteditable='true']\").html();\n    $parent.removeClass(\"dirty\");\n\n    if ($(this).html() !== $(this).data(\"start\")) {\n      (function () {\n        var id = $parent.data(\"id\");\n        var dataToSend = {\n          \"text\": text.replace(/<br>/g, \"\\n\"),\n          \"id\": id\n        };\n\n        $.ajax({\n          method: \"POST\",\n          url: \"update_quote.php\",\n          data: dataToSend\n        }).done(function (msg) {\n          $(\"blockquote[data-id='\" + id + \"']\").find(\"span[contenteditable='true']\").html(text);\n        });\n      })();\n    }\n  });\n\n  $(\"blockquote.quote .controls .btn-info\").on(\"click\", function () {\n    var _this = this;\n\n    if (confirm(\"Czy na pewno chcesz usunąć ten cytat? Ta opcja jest nieodwracalna!\")) {\n      (function () {\n        var $parent = $(_this).parents(\"blockquote\");\n\n        if ($(_this).html() !== $(_this).data(\"start\")) {\n          (function () {\n            var id = $parent.data(\"id\");\n            var dataToSend = {\n              \"id\": id\n            };\n\n            $.ajax({\n              method: \"POST\",\n              url: \"remove_quote.php\",\n              data: dataToSend\n            }).done(function (msg) {\n              $(\"blockquote[data-id='\" + id + \"']\").remove();\n              $parent.remove();\n            });\n          })();\n        }\n      })();\n    }\n  });\n});\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqc1xcYWRtaW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLEVBQUUsUUFBRixFQUFZLEtBQVosQ0FBa0IsWUFBVztBQUMzQixJQUFFLHlDQUFGLEVBQTZDLEVBQTdDLENBQWdELE9BQWhELEVBQXlELFlBQVU7QUFDakUsUUFBTSxVQUFVLEVBQUUsSUFBRixFQUFRLE1BQVIsRUFBaEI7QUFDQSxZQUFRLFdBQVIsQ0FBb0IsT0FBcEI7QUFDQSxRQUFJLEVBQUUsSUFBRixFQUFRLElBQVIsT0FBbUIsRUFBRSxJQUFGLEVBQVEsSUFBUixDQUFhLE9BQWIsQ0FBdkIsRUFBOEM7QUFDNUMsY0FBUSxRQUFSLENBQWlCLE9BQWpCO0FBQ0Q7QUFDRixHQU5EOztBQVNBLElBQUUseUNBQUYsRUFBNkMsRUFBN0MsQ0FBZ0QsT0FBaEQsRUFBeUQsWUFBVTtBQUNqRSxRQUFNLFVBQVUsRUFBRSxJQUFGLEVBQVEsT0FBUixDQUFnQixZQUFoQixDQUFoQjtBQUNBLFFBQU0sT0FBTyxRQUFRLElBQVIsQ0FBYSw4QkFBYixFQUE2QyxJQUE3QyxFQUFiO0FBQ0EsWUFBUSxXQUFSLENBQW9CLE9BQXBCOztBQUVBLFFBQUksRUFBRSxJQUFGLEVBQVEsSUFBUixPQUFtQixFQUFFLElBQUYsRUFBUSxJQUFSLENBQWEsT0FBYixDQUF2QixFQUE4QztBQUFBO0FBQzVDLFlBQU0sS0FBSyxRQUFRLElBQVIsQ0FBYSxJQUFiLENBQVg7QUFDQSxZQUFNLGFBQWE7QUFDakIsa0JBQVEsS0FBSyxPQUFMLENBQWEsT0FBYixFQUFzQixJQUF0QixDQURTO0FBRWpCLGdCQUFNLEVBRlc7QUFHakIsb0JBQVU7QUFITyxTQUFuQjs7QUFNQSxVQUFFLElBQUYsQ0FBTztBQUNMLGtCQUFRLE1BREg7QUFFTCxlQUFLLGtCQUZBO0FBR0wsZ0JBQU07QUFIRCxTQUFQLEVBS0MsSUFMRCxDQUtNLFVBQVUsR0FB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VixFQUFnQjtBQUNwQixnQkFBRSx5QkFBdUIsRUFBdkIsR0FBMEIsSUFBNUIsRUFBa0MsTUFBbEM7QUFDQSxzQkFBUSxNQUFSO0FBQ0QsYUFSRDtBQU40QztBQWU3QztBQWxCZ0Y7QUFtQmxGO0FBQ0YsR0FyQkQ7QUF1QkQsQ0EvR0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgJChcImJsb2NrcXVvdGUgc3Bhbltjb250ZW50ZWRpdGFibGU9J3RydWUnXVwiKS5vbihcImlucHV0XCIsIGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnQoKTtcclxuICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoXCJkaXJ0eVwiKTtcclxuICAgIGlmKCAkKHRoaXMpLmh0bWwoKSAhPT0gJCh0aGlzKS5kYXRhKFwic3RhcnRcIikgKXtcclxuICAgICAgJHBhcmVudC5hZGRDbGFzcyhcImRpcnR5XCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcbiAgJChcImJsb2NrcXVvdGUucXVvdGUgLmNvbnRyb2xzIC5idG4tc3VjY2Vzc1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiYmxvY2txdW90ZVwiKTtcclxuICAgIGNvbnN0IHRleHQgPSAkcGFyZW50LmZpbmQoXCJzcGFuW2NvbnRlbnRlZGl0YWJsZT0ndHJ1ZSddXCIpLmh0bWwoKTtcclxuICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoXCJkaXJ0eVwiKTtcclxuXHJcbiAgICBpZiggJCh0aGlzKS5odG1sKCkgIT09ICQodGhpcykuZGF0YShcInN0YXJ0XCIpICl7XHJcbiAgICAgIGNvbnN0IGlkID0gJHBhcmVudC5kYXRhKFwiaWRcIik7XHJcbiAgICAgIGNvbnN0IGRhdGFUb1NlbmQgPSB7XHJcbiAgICAgICAgXCJ0ZXh0XCI6IHRleHQucmVwbGFjZSgvPGJyPi9nLCBcIlxcblwiKSxcclxuICAgICAgICBcImlkXCI6IGlkLFxyXG4gICAgICAgIFwiYWN0aXZlXCI6IHRydWVcclxuICAgICAgfTtcclxuXHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICB1cmw6IFwidXBkYXRlX3F1b3RlLnBocFwiLFxyXG4gICAgICAgIGRhdGE6IGRhdGFUb1NlbmRcclxuICAgICAgfSlcclxuICAgICAgLmRvbmUoZnVuY3Rpb24oIG1zZyApIHtcclxuICAgICAgICBpZiggJHBhcmVudC5wYXJlbnQoKS5oYXNDbGFzcyhcIm5ldy1xdW90ZXNcIikgKXtcclxuICAgICAgICAgICRwYXJlbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiYmxvY2txdW90ZVtkYXRhLWlkPSdcIitpZCtcIiddXCIpXHJcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJpbmFjdGl2ZVwiKVxyXG4gICAgICAgICAgLmZpbmQoXCJzcGFuW2NvbnRlbnRlZGl0YWJsZT0ndHJ1ZSddXCIpLmh0bWwoIHRleHQgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoXCJibG9ja3F1b3RlLnF1b3RlIC5jb250cm9scyAuYnRuLWRhbmdlclwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiYmxvY2txdW90ZVwiKTtcclxuICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoXCJkaXJ0eVwiKTtcclxuXHJcbiAgICBpZiggJCh0aGlzKS5odG1sKCkgIT09ICQodGhpcykuZGF0YShcInN0YXJ0XCIpICl7XHJcbiAgICAgIGNvbnN0IGlkID0gJHBhcmVudC5kYXRhKFwiaWRcIik7XHJcbiAgICAgIGNvbnN0IGRhdGFUb1NlbmQgPSB7XHJcbiAgICAgICAgXCJpZFwiOiBpZCxcclxuICAgICAgICBcImFjdGl2ZVwiOiBmYWxzZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgIHVybDogXCJ1cGRhdGVfcXVvdGUucGhwXCIsXHJcbiAgICAgICAgZGF0YTogZGF0YVRvU2VuZFxyXG4gICAgICB9KVxyXG4gICAgICAuZG9uZShmdW5jdGlvbiggbXNnICkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBtc2cgKTtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiaW5hY3RpdmVcIik7XHJcbiAgICAgICAgJChcImJsb2NrcXVvdGVbZGF0YS1pZD0nXCIraWQrXCInXVwiKS5hZGRDbGFzcyhcImluYWN0aXZlXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJChcImJsb2NrcXVvdGUucXVvdGUgLmNvbnRyb2xzIC5idG4td2FybmluZ1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiYmxvY2txdW90ZVwiKTtcclxuICAgIGNvbnN0IHRleHQgPSAkcGFyZW50LmZpbmQoXCJzcGFuW2NvbnRlbnRlZGl0YWJsZT0ndHJ1ZSddXCIpLmh0bWwoKTtcclxuICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoXCJkaXJ0eVwiKTtcclxuXHJcbiAgICBpZiggJCh0aGlzKS5odG1sKCkgIT09ICQodGhpcykuZGF0YShcInN0YXJ0XCIpICl7XHJcbiAgICAgIGNvbnN0IGlkID0gJHBhcmVudC5kYXRhKFwiaWRcIik7XHJcbiAgICAgIGNvbnN0IGRhdGFUb1NlbmQgPSB7XHJcbiAgICAgICAgXCJ0ZXh0XCI6IHRleHQucmVwbGFjZSgvPGJyPi9nLCBcIlxcblwiKSxcclxuICAgICAgICBcImlkXCI6IGlkXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgdXJsOiBcInVwZGF0ZV9xdW90ZS5waHBcIixcclxuICAgICAgICBkYXRhOiBkYXRhVG9TZW5kXHJcbiAgICAgIH0pXHJcbiAgICAgIC5kb25lKGZ1bmN0aW9uKCBtc2cgKSB7XHJcbiAgICAgICAgJChcImJsb2NrcXVvdGVbZGF0YS1pZD0nXCIraWQrXCInXVwiKVxyXG4gICAgICAgICAgLmZpbmQoXCJzcGFuW2NvbnRlbnRlZGl0YWJsZT0ndHJ1ZSddXCIpLmh0bWwoIHRleHQgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoXCJibG9ja3F1b3RlLnF1b3RlIC5jb250cm9scyAuYnRuLWluZm9cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgaWYoIGNvbmZpcm0oXCJDenkgbmEgcGV3bm8gY2hjZXN6IHVzdW7EhcSHIHRlbiBjeXRhdD8gVGEgb3BjamEgamVzdCBuaWVvZHdyYWNhbG5hIVwiKSApe1xyXG4gICAgICBjb25zdCAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiYmxvY2txdW90ZVwiKTtcclxuXHJcbiAgICAgIGlmKCAkKHRoaXMpLmh0bWwoKSAhPT0gJCh0aGlzKS5kYXRhKFwic3RhcnRcIikgKXtcclxuICAgICAgICBjb25zdCBpZCA9ICRwYXJlbnQuZGF0YShcImlkXCIpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFUb1NlbmQgPSB7XHJcbiAgICAgICAgICBcImlkXCI6IGlkXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICB1cmw6IFwicmVtb3ZlX3F1b3RlLnBocFwiLFxyXG4gICAgICAgICAgZGF0YTogZGF0YVRvU2VuZFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oIG1zZyApIHtcclxuICAgICAgICAgICQoXCJibG9ja3F1b3RlW2RhdGEtaWQ9J1wiK2lkK1wiJ11cIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAkcGFyZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG59KTtcclxuIl19\n"]}